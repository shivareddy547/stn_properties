<div class="row mb-3" style="border: 1px solid #ccc; border-radius: 10px; padding: 0px;">
  
  <!-- Row Header with Notification Text -->
  <div class="col-12 mb-1 p-0">
    <div class="header-notification" style="background-color: rgb(31, 54, 117); color: white; padding: 5px; text-align: center; border-radius: 10px 10px 0 0;">
      <h2 class="mb-0">Exclusive Hotel Deals - Limited Time Offer!</h2>
    </div>
  </div>

  <!-- Part 1: Image Gallery (Main Image and Thumbnail Row) -->
  <style>
    .main-img-thumbnail{
      max-height: 400px; object-fit: cover; width: 100%;
    }
    .img-fluid-thumb{
      height: 100px; object-fit: cover; width: 100px;
    }
  </style>

<div class="col-4 product">
  <% if product.images.size > 1 %>
    <div class="text-center mainImage">
      <%= image_tag(main_app.cdn_image_url(product.images[0].url(:product)), class: "main-img-thumbnail","data-toggle": "modal", id: "mainImage#{product.id}", "data-target":"#imageGalleryModal#{product.id}", "data-original-src": main_app.cdn_image_url(product.images[0].url(:product))) %>
    </div>
    
    <div class="d-flex justify-content-between align-items-center mt-3 thumbnails">
      <% product.images.first(4).each_with_index do |i, index| %>
        <%= link_to image_tag(main_app.cdn_image_url(i.url(:product)), class: "img-fluid img-fluid-thumb thumbnail-img"), "#", class: "thumbnail", "data-product-id": product.id, "data-img-url": main_app.cdn_image_url(i.url(:product)), "data-toggle": "modal", "data-target": "#imageGalleryModal#{product.id}", onclick: "openSlideshow(#{index})" %>
      <% end %>
    </div>
  <% end %>
</div>

<% @product= product %>
<% @variants = product.variants  %>
  <% url = spree.product_path(product, taxon_id: @taxon.try(:id)) %>

  <% is_product_available_in_currency = product_available_in_currency? %>
<% default_variant = default_variant(@variants, @product) %>
  
  <!-- Part 2: Product Details -->
  <div class="col-5">
    
      <%= link_to url,style:"text-decoration: none; color: inherit;" do %>
      <div class="product-component-name" title="The LaLiT Mumbai">
        <%= content_tag(:span, truncate(product.name, length: 50), class: 'info mt-3 d-block', title: product.name) %>

      </div>
      <div class="product-rating-location" style="font-size: 14px; color: #666;">
        <span class="rating">★★★★☆</span> <!-- Example rating -->
        <span class="location">Location: Mumbai, India</span>
      </div>

      <!-- Property Offers Section -->
      <div class="offers-section" style="margin-top: 10px;">
        <strong>This property offers:</strong>
        <div class="offers" style="margin-top: 5px; position: relative;">
          <span class="offer-box" style="display: inline-block; background-color: #f8f8f8; border: 1px solid #ccc; border-radius: 5px; padding: 5px 10px; margin: 2px;">Breakfast Included</span>
          <span class="offer-box" style="display: inline-block; background-color: #f8f8f8; border: 1px solid #ccc; border-radius: 5px; padding: 5px 10px; margin: 2px;">Free Wifi</span>
          <span class="offer-box more" style="display: inline-block; background-color: #f8f8f8; border: 1px solid #ccc; border-radius: 5px; padding: 5px 10px; margin: 2px;">
            <span class="more">More</span>
          </span>
        </div>
      </div>
     
<% end %>
  </div>

  <!-- Dotted Line Separator -->
  <div class="col-1" style="border-left: 1px dotted #ccc; height: 100%;"></div>

  <!-- Part 3: Price Details -->
  <div class="col-2 text-right">
    <div class="review-section" style="font-size: 16px; color: #2a6ebd;">
      <strong>8.6 Excellent</strong><br>
      <span style="font-size: 12px; color: #666;">584 reviews</span>
    </div>
    
    <div class="offer-section mt-2" style="color: #d9534f;">
      <span style="background-color: #ff6666; color: white; padding: 5px; border-radius: 5px;"><%= discount_percentage = ((default_variant.compare_at_price - default_variant.price) / default_variant.compare_at_price) * 100 %>% OFF TODAY</span>
      <div style="color: #f77f7f;">Price has increased</div>
    </div>

    <div class="price-section mt-2">
    
      <div style="text-decoration: line-through; font-size: 18px; color: #666;"><%= display_price(default_variant) %></div>
      <% if should_display_compare_at_price?(default_variant) %>
      <div style="font-size: 24px; color: #d9534f;"><strong><%= display_compare_at_price(default_variant) %></strong></div>
      <% end %>
      <div style="font-size: 12px; color: #999;">Per night before taxes and fees</div>
    </div>
  </div>
</div>

<!-- Modal -->
   <!-- Modal -->
   <div class="modal fade" id="imageGalleryModal<%= product.id %>" tabindex="-1" role="dialog" aria-labelledby="imageGalleryLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <div class="toggle-and-tabs">
                    <div class="toggle-view">
                        <button id="toggleViewButton<%= product.id %>" class="btn btn-primary" onclick="toggleView(<%=product.id %>)">Slideshow</button>
                    </div>

                    <ul class="nav nav-tabs" id="galleryTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="all-tab" data-toggle="tab" href="#all<%= product.id%>" role="tab" aria-controls="all" aria-selected="true">All (6)</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="rooms-tab" data-toggle="tab" href="#rooms<%= product.id%>" role="tab" aria-controls="rooms" aria-selected="false">Rooms (2)</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="views-tab" data-toggle="tab" href="#views<%= product.id%>" role="tab" aria-controls="views" aria-selected="false">Property Views (4)</a>
                        </li>
                    </ul>
                </div>

                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
              <div class="row">
                <div class="col-md-8">
                    <div class="tab-content<%= product.id %> tab-css">
                        <div id="all<%= product.id%>" class="tab-pane  fade show active">
                            <div class="image-grid active-grid">
                                <% product.images.each_with_index do |i,index| %>
                                    <div class="col-md-4">
                                        <%= image_tag(main_app.cdn_image_url(i.url(:product)), class: "img-fluid", onclick: "openSlideshow(#{index},#{product.id})") %>
                                    </div>
                                <% end %>
                            </div>
                            <div class="carousel" id="carouselall<%= product.id %>">
                                <!-- Carousel for All tab -->
                            </div>
                        </div>
            
                        <div id="rooms<%= product.id%>" class="tab-pane fade hide">
                            <div class="image-grid">
                                <div class="col-md-4">
                                    <img src="https://via.placeholder.com/300x200.png" alt="Room Image 1" class="img-fluid" onclick="openSlideshow(0,<%= product.id%>)">
                                </div>
                                <div class="col-md-4">
                                    <img src="https://via.placeholder.com/300x200.png" alt="Room Image 2" class="img-fluid" onclick="openSlideshow(1,<%= product.id%>)">
                                </div>
                            </div>
                            <div class="carousel" id="carouselrooms<%= product.id %>">
                                <!-- Carousel for Rooms tab -->
                            </div>
                        </div>
            
                        <div id="views<%= product.id%>" class="tab-pane fade hide">
                            <div class="image-grid">
                                <div class="col-md-4">
                                    <img src="https://via.placeholder.com/300x200.png" alt="View Image 1" class="img-fluid" onclick="openSlideshow(2,<%= product.id%>)">
                                </div>
                                <div class="col-md-4">
                                    <img src="https://via.placeholder.com/300x200.png" alt="View Image 2" class="img-fluid" onclick="openSlideshow(3,<%= product.id%>)">
                                </div>
                                <div class="col-md-4">
                                    <img src="https://via.placeholder.com/300x200.png" alt="View Image 3" class="img-fluid" onclick="openSlideshow(4,<%= product.id%>)">
                                </div>
                                <div class="col-md-4">
                                    <img src="https://via.placeholder.com/300x200.png" alt="View Image 4" class="img-fluid" onclick="openSlideshow(5,<%= product.id%>)">
                                </div>
                            </div>
                            <div class="carousel" id="carouselviews<%= product.id %>">
                                <!-- Carousel for Views tab -->
                            </div>
                        </div>
                    </div>
            
                    <div id="slideshowView<%= product.id %>" class="d-none">
                        <div id="imageCarousel<%= product.id %>" class="carousel slide" data-ride="carousel">
                            <ol class="carousel-indicators">
                                <% product.images.each_with_index do |image, index| %>
                                    <li data-target="#imageCarousel<%= product.id %>" data-slide-to="<%= index %>" class="<%= 'active' if index == 0 %>"></li>
                                <% end %>
                            </ol>
            
                            <div class="carousel-inner">
                                <% product.images.each_with_index do |image, index| %>
                                    <div class="carousel-item <%= 'active' if index == 0 %>">
                                        <%= image_tag(main_app.cdn_image_url(image.url(:large)), alt: "Product Image #{index + 1}", class: "d-block w-100") %>
                                        <div class="carousel-caption">
                                            <p>Image <%= index + 1 %></p>
                                        </div>
                                    </div>
                                <% end %>
                            </div>
            
                            <a class="carousel-control-prev" href="#imageCarousel<%= product.id %>" role="button" data-slide="prev">
                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                <span class="sr-only">Previous</span>
                            </a>
                            <a class="carousel-control-next" href="#imageCarousel<%= product.id %>" role="button" data-slide="next">
                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                <span class="sr-only">Next</span>
                            </a>
                        </div>
                    </div>
                </div>
            
                <div class="col-md-4 property-overview">
                    <h5>Nearby Attraction</h5>
                    <p>Elephanta Cave - 3.6 km</p>
                    <p>Juhu Beach - 5.94 km</p>
                    <p>Bandra-Worli Sea Link - 10.99 km</p>
                    <p>Shree Siddhivinayak - 11.52 km</p>
            
                    <h5>Dining, drinking and snacking</h5>
                    <p>Coffee/tea maker</p>
                    <p>Free bottled water</p>
                    <p>Mini bar</p>
                    <p>Wine glasses</p>
                </div>
            </div>
            
            
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
