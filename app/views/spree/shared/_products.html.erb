<% content_for :head do %>
  <% if products.respond_to?(:total_pages) %>
    <%= rel_next_prev_link_tags products %>
  <% end %>
<% end %>
<head>
  <!-- Other head content -->

  <!-- Include Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<div class="col-md-12 col-lg-9" data-hook="homepage_products">
  <div class="row">
    <% cache cache_key_for_products(products) do %>
      <% products.each_with_index do |product, index| %>
        <div id="product_<%= product.id %>" class="">
          <%= render 'spree/shared/product', product: product, image_class: 'product-component-plp-image' %>
          <%= render partial: 'spree/shared/product_modal', locals: { product: product } %>
        </div>
      <% end %>
    <% end %>
  </div>

  <% if products.respond_to?(:total_pages) %>
    <div class="row pl-md-4 pl-sm-4">
      <div class="col-12">
        <div class="plp-pagination d-none d-lg-flex">
          <%= paginate products, window: 2, theme: 'twitter-bootstrap-4' %>
        </div>

        <div class="plp-pagination d-lg-none">
          <%= paginate products, window: 1, theme: 'twitter-bootstrap-4' %>
        </div>
      </div>
    </div>
  <% end %>
</div>

<script>
  
// Get all product containers
const products = document.querySelectorAll('.product');

// Loop through each product
products.forEach(product => {
  const mainImage = product.querySelector('.mainImage img'); // Get the main image for this product
  const thumbnails = product.querySelectorAll('.thumbnail'); // Get all thumbnails for this product

  // Add hover event listener to each thumbnail
  thumbnails.forEach(thumbnail => {
    thumbnail.addEventListener('mouseenter', function() {
      const imgUrl = this.getAttribute('data-img-url'); // Get the URL from data attribute
      mainImage.src = imgUrl; // Change the main image's src to the thumbnail's image
    });

    // Revert to original main image on mouse leave
    thumbnail.addEventListener('mouseleave', function() {
      const originalSrc = mainImage.getAttribute('data-original-src'); // Get the original image URL
      mainImage.src = originalSrc; // Revert to the original main image
    });
  });
});


</script>



<script>
  document.addEventListener('DOMContentLoaded', function() {
  var offersSection = document.querySelector('.offer-box.more');
  var radioButtons = document.querySelector('.radio-buttons');
  
  offersSection.addEventListener('mouseenter', function() {
    radioButtons.style.display = 'block'; // Show the radio buttons on hover
  });

  offersSection.addEventListener('mouseleave', function() {
    radioButtons.style.display = 'none'; // Hide the radio buttons when not hovering
  });
});


  
</script>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

<style>
  /* Offer Box - Show radio buttons on hover */
.offer-box.more:hover .radio-buttons {
  display: block;
}

/* Modal XL Size */
.modal-xl {
  max-width: 90%;
}

/* Gallery Grid Layout */
.gallery-grid,
.image-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 10px;
  padding: 20px;
}

.gallery-grid img,
.image-grid img,
.gallery img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  cursor: pointer;
  border-radius: 5px;
}

.gallery img {
  max-width: 150px;
  margin-right: 10px;
}

/* Carousel Items */
.carousel-item img {
  width: 100%;
  height: 400px;
  object-fit: cover;
}

.carousel-caption {
  position: static;
  padding-top: 10px;
  background-color: rgba(0, 0, 0, 0.5);
  color: #fff;
  text-align: center;
  font-size: 1.2rem;
}

/* Modal Body Layout - Scrollable and Flex */
.modal-body {
  display: flex;
  overflow-y: auto;
  max-height: 80vh;
}

/* Property Overview Section */
.property-overview {
  padding-left: 20px;
  border-left: 1px solid #ddd;
  max-width: 300px;
}

.property-overview h5 {
  margin-top: 20px;
}

.property-overview p {
  margin-bottom: 10px;
}

/* Scrollable Property Overview */
.scrollable-section {
  max-height: 75vh;
  overflow-y: auto;
}

/* Toggle View Button Styling */
.toggle-view {
  display: flex;
  align-items: center;
}

.toggle-view button {
  margin-right: 15px;
}

/* Tabs and Toggle Alignment */
.toggle-and-tabs {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.nav-tabs {
  margin-bottom: 15px;
}

.nav-item {
  margin-right: 15px;
}

.tab-content .active-grid {
  display: flex;
}

/* Hidden Class (Utility) */
.hidden {
  display: none;
}

/* Thumbnail Images */
.main-img-thumbnail {
  max-height: 400px;
  object-fit: cover;
  width: 100%;
}

.img-fluid-thumb {
  height: 100px;
  object-fit: cover;
  width: 100px;
}

</style>