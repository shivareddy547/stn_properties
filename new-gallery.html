<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Modal with Tabs and Slideshow</title>
  <style>
    .modal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      overflow: auto;
    }

    .modal-content {
      background-color: #fefefe;
      margin: 10% auto;
      padding: 20px;
      border: 1px solid #888;
      width: 80%;
      border-radius: 10px;
    }

    .close {
      color: #aaa;
      float: right;
      font-size: 28px;
      font-weight: bold;
    }

    .close:hover,
    .close:focus {
      color: black;
      text-decoration: none;
      cursor: pointer;
    }

    .tab {
      display: flex;
      margin-bottom: 20px;
    }

    .tab button {
      background-color: #f1f1f1;
      border: none;
      cursor: pointer;
      padding: 10px 20px;
      transition: background-color 0.3s;
    }

    .tab button.active {
      background-color: #ddd;
    }

    .tabcontent {
      display: none;
    }

    .tabcontent.active {
      display: block;
    }

    .gallery {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }

    .gallery img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      cursor: pointer;
    }

    .slideshow {
      display: none;
    }

    .slideshow.active {
      display: block;
    }

    .carousel-item {
      display: none;
    }

    .carousel-item.active {
      display: block;
    }

    .carousel {
      text-align: center;
    }

    .carousel img {
      max-width: 100%;
      height: auto;
    }

    .prev, .next {
      cursor: pointer;
      position: absolute;
      top: 50%;
      width: auto;
      margin-top: -22px;
      padding: 16px;
      color: white;
      font-weight: bold;
      font-size: 18px;
      transition: 0.6s ease;
      border-radius: 0 3px 3px 0;
      user-select: none;
    }

    .next {
      right: 0;
      border-radius: 3px 0 0 3px;
    }

    .prev:hover, .next:hover {
      background-color: rgba(0,0,0,0.8);
    }
  </style>
</head>
<body>

<!-- Button to Open Modal -->
<button id="openModalBtn">Open Gallery Modal</button>

<!-- The Modal -->
<div id="galleryModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>Image Gallery</h2>

    <!-- Tab Buttons -->
    <div class="tab">
      <button class="tablinks" data-tab="tab1">Tab 1</button>
      <button class="tablinks" data-tab="tab2">Tab 2</button>
      <button class="tablinks" data-tab="tab3">Tab 3</button>
    </div>

    <!-- Tab Content -->
    <div id="tab1" class="tabcontent">
      <div class="gallery">
        <img src="https://pix8.agoda.net/hotelImages/70697/0/b8d18c051d274c6e45b98e6e15deb7e0.jpg?ca=0&ce=1&s=1024x" onclick="openSlideshow(0, 'tab1')">
        <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/34698397.jpg?k=a7ae370acab8f575af24b23e75f4b9ac633692cb9eee17dd40b115cffb503f39&o=&s=375x" onclick="openSlideshow(1, 'tab1')">
        <img src="https://pix8.agoda.net/hotelImages/70697/-1/7e5ee69ac5a9ba9ed8fc247cb866470c.jpg?ca=0&ce=1&s=375x" onclick="openSlideshow(2, 'tab1')">
      </div>
      <div class="slideshow">
        <div class="carousel">
            <div class="carousel-item">
                <img src="https://pix8.agoda.net/hotelImages/70697/0/b8d18c051d274c6e45b98e6e15deb7e0.jpg?ca=0&ce=1&s=1024x">
              </div>
              <div class="carousel-item">
                <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/34698397.jpg?k=a7ae370acab8f575af24b23e75f4b9ac633692cb9eee17dd40b115cffb503f39&o=&s=375x">
              </div>
              <div class="carousel-item">
                <img src="https://pix8.agoda.net/hotelImages/70697/-1/7e5ee69ac5a9ba9ed8fc247cb866470c.jpg?ca=0&ce=1&s=375x">
              </div>
        </div>
        <!-- Previous and Next Buttons -->
        <a class="prev" onclick="changeSlide(-1, 'tab1')">&#10094;</a>
        <a class="next" onclick="changeSlide(1, 'tab1')">&#10095;</a>
      </div>
    </div>

    <div id="tab2" class="tabcontent">
      <div class="gallery">
        <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/34698397.jpg?k=a7ae370acab8f575af24b23e75f4b9ac633692cb9eee17dd40b115cffb503f39&o=&s=375x" onclick="openSlideshow(0, 'tab2')">
        <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/34190910.jpg?k=560268df075ffbd552c9aad864ac9d4854a81d3957eb9b4fb7d57c71207780ad&o=&s=375x" onclick="openSlideshow(1, 'tab2')">
        <img src="https://via.placeholder.com/100?text=C" onclick="openSlideshow(2, 'tab2')">
      </div>
      <div class="slideshow">
        <div class="carousel">
            <div class="carousel-item">
                <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/34698397.jpg?k=a7ae370acab8f575af24b23e75f4b9ac633692cb9eee17dd40b115cffb503f39&o=&s=375x">
              </div>
              <div class="carousel-item">
                <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/34190910.jpg?k=560268df075ffbd552c9aad864ac9d4854a81d3957eb9b4fb7d57c71207780ad&o=&s=375x">
              </div>
              <div class="carousel-item">
                <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/320297108.jpg?k=e3806b220ffc11d76b610f06bd9a33dcb0d7b2affc62f7d5aa0f2fe1762681d6&o=&s=375x">
              </div>
        </div>
        <!-- Previous and Next Buttons -->
        <a class="prev" onclick="changeSlide(-1, 'tab2')">&#10094;</a>
        <a class="next" onclick="changeSlide(1, 'tab2')">&#10095;</a>
      </div>
    </div>

    <div id="tab3" class="tabcontent">
      <div class="gallery">
        <img src="https://pix8.agoda.net/hotelImages/70697/0/b8d18c051d274c6e45b98e6e15deb7e0.jpg?ca=0&ce=1&s=375x" onclick="openSlideshow(0, 'tab3')">
        <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/59728339.jpg?k=f100955ddcd1ea8a018d2a0946e364f6365dcb1fc46b4691f0725f066af8735b&o=&s=375x" onclick="openSlideshow(1, 'tab3')">
        <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/59728366.jpg?k=50fbb0d3f74761a9098f1923363ed01a830e94ef0031ff83fb433727f3798fee&o=&s=375x" onclick="openSlideshow(2, 'tab3')">
      </div>
      <div class="slideshow">
        <div class="carousel">
            <div class="carousel-item">
                <img src="https://pix8.agoda.net/hotelImages/70697/0/b8d18c051d274c6e45b98e6e15deb7e0.jpg?ca=0&ce=1&s=375x">
              </div>
              <div class="carousel-item">
                <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/59728339.jpg?k=f100955ddcd1ea8a018d2a0946e364f6365dcb1fc46b4691f0725f066af8735b&o=&s=375x">
              </div>
              <div class="carousel-item">
                <img src="https://q-xx.bstatic.com/xdata/images/hotel/max1024x768/59728366.jpg?k=50fbb0d3f74761a9098f1923363ed01a830e94ef0031ff83fb433727f3798fee&o=&s=375x">
              </div>
        </div>
        <!-- Previous and Next Buttons -->
        <a class="prev" onclick="changeSlide(-1, 'tab3')">&#10094;</a>
        <a class="next" onclick="changeSlide(1, 'tab3')">&#10095;</a>
      </div>
    </div>
  </div>

</div>

<!-- JavaScript for Modal, Tabs, and Slideshow -->
<script>
  // Open Modal
  const modal = document.getElementById("galleryModal");
  const openModalBtn = document.getElementById("openModalBtn");
  const closeModal = document.querySelector(".close");

  openModalBtn.onclick = function() {
    modal.style.display = "block";
  }

  closeModal.onclick = function() {
    modal.style.display = "none";
  }

  window.onclick = function(event) {
    if (event.target == modal) {
      modal.style.display = "none";
    }
  }

  // Tab Switching
  const tabLinks = document.querySelectorAll(".tablinks");
  const tabContents = document.querySelectorAll(".tabcontent");

  tabLinks.forEach(link => {
    link.addEventListener("click", function() {
      tabLinks.forEach(btn => btn.classList.remove("active"));
      tabContents.forEach(content => content.classList.remove("active"));

      document.getElementById(link.dataset.tab).classList.add("active");
      link.classList.add("active");
    });
  });

  // Slideshow Functionality
  function openSlideshow(imageIndex, tabId) {
    const tabContent = document.getElementById(tabId);
    const gallery = tabContent.querySelector(".gallery");
    const slideshow = tabContent.querySelector(".slideshow");
    const carouselItems = slideshow.querySelectorAll(".carousel-item");

    // Hide the gallery and show the slideshow
    gallery.style.display = "none";
    slideshow.style.display = "block";

    // Remove active class from all carousel items
    carouselItems.forEach(item => item.classList.remove("active"));

    // Add active class to the clicked item
    if (carouselItems[imageIndex]) {
      carouselItems[imageIndex].classList.add("active");
    }

    // Set current index for next/prev navigation
    slideshow.setAttribute('data-current-slide', imageIndex);
  }

  // Change Slide for Next/Previous
  function changeSlide(step, tabId) {
    const tabContent = document.getElementById(tabId);
    const slideshow = tabContent.querySelector(".slideshow");
    const carouselItems = slideshow.querySelectorAll(".carousel-item");
    let currentSlide = parseInt(slideshow.getAttribute('data-current-slide'));

    // Calculate next slide index
    currentSlide += step;
    if (currentSlide >= carouselItems.length) {
      currentSlide = 0; // Loop back to first
    } else if (currentSlide < 0) {
      currentSlide = carouselItems.length - 1; // Go to last slide
    }

    // Remove active class from all carousel items
    carouselItems.forEach(item => item.classList.remove("active"));

    // Add active class to the new slide
    carouselItems[currentSlide].classList.add("active");

    // Update the current slide index
    slideshow.setAttribute('data-current-slide', currentSlide);
  }

  // Close Slideshow and return to Gallery view
  document.addEventListener("keydown", function(event) {
    if (event.key === "Escape") {
      const activeTab = document.querySelector(".tabcontent.active");
      const gallery = activeTab.querySelector(".gallery");
      const slideshow = activeTab.querySelector(".slideshow");

      gallery.style.display = "flex";
      slideshow.style.display = "none";
    }
  });
</script>

</body>
</html>
